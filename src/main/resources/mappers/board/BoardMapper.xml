<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team5.projrental.board.BoardMapper">
    <select id="selBoard">
        SELETE A.nick, A.stored_pic AS userPic
            , B.view, B.created_at AS createdAt
            , C.comment AS comments, D.storedPic AS pic
        FROM user A
        JOIN board B
        ON A.iuser = B.iuser
        JOIN board_comment C
        ON B.iboard = C.iboard
        JOIN board_pic D
        ON B.iboard = D.iboard
        WHERE B.iboard = {iboard} and status = 1
    </select>


    <update id="delBoard">
        UPDATE board
        SET status = 2
        WHERE iboard = #{iboard}
    </update>

    <insert id="insLike">
        INSERT INTO board_like
        SET board_iboard = #{iboard} and iuser = #{loginIuser}
    </insert>

    <delete id="delLike">
        DELETE FROM board_like
        WHERE board_iboard = #{iboard} and iuser = #{loginIuser}
    </delete>


</mapper>